"use strict";(self.webpackChunkcrm_web_application=self.webpackChunkcrm_web_application||[]).push([[185],{4185:(e,n,a)=>{a.r(n),a.d(n,{default:()=>T});var t,r=a(168),l=a(2978);const s=l.ZP.div(t||(t=(0,r.Z)(["\n    margin-top: 0.5rem;\n    margin-left: 0.5rem;\n    margin-right: 0.5rem;\n    height: 90vh;\n    border-radius: 0.75rem;\n    background-color: ",";\n    box-shadow: 4px 0px 14px 5px rgba(227, 255, 168, 0.2);\n    padding: 0.75rem;\n\n\n    .wraper{\n        width: 100%;\n        border: 1px solid ",";\n        border-radius: 0.75rem;\n        padding: 0.75rem;\n        height: 87.5dvh;\n    }\n"])),(e=>e.theme.color.background),(e=>e.theme.color.primary_green_lite));var o,c=a(1087),i=a(6081),d=a(4420),m=a(7039),g=a(2865);const u=l.ZP.div(o||(o=(0,r.Z)(["\n  border: 1px solid ",';\n  border-radius: 0.625rem;\n  width: 100%;\n\n  .Table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    border-radius: 0.5rem;\n    overflow: hidden;\n  }\n\n  .TableHeader {\n    background: #223f53;\n  }\n\n  .TableHeaderList th {\n    padding: 1rem 0.25rem 1rem 0.25rem;\n  }\n\n  td[id^="lastName-"],\n  td[id^="email-"],\n  td[id^="phone-"],\n  td[id^="resourse-"],\n  td[id^="country-"],\n  td[id^="region-"],\n  td[id^="city-"] {\n    max-width: 70px;\n    max-height: 50px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    position: relative;\n  }\n\n  .TableHeaderItem {\n    padding:0.5rem 0.25rem;\n    border-bottom: 1px solid ',";\n    text-align: left;\n    font-weight: 500;\n    font-size: 0.5rem;\n    overflow-wrap: break-word;\n    text-align: center;\n    position: relative;\n  }\n\n  .TableHeaderItem:not(:last-child) {\n    border-right: 1px solid ",";\n  }\n\n  .WordList textarea,\n  select,\n  input {\n    cursor: pointer;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    border: none;\n    background: none;\n    resize: none;\n    overflow: hidden;\n    text-align: center;\n    align-items: center;\n    display: flex;\n    color: ",";\n    position: relative;\n\n    &:focus {\n      outline: none;\n      box-shadow: none;\n    }\n  }\n\n  .dropdown {\n    z-index: 1000;\n    position: absolute;\n        font-size: 0.5rem;\n    /* display: grid; */\n    gap: 0.25rem;\n    border-radius: 1rem;\n    padding: 0.75rem 0.5rem;\n    box-shadow: 0 0.25rem 3rem 0 rgba(18, 20, 23, 0.08);\n    background: ",";\n    color: black;\n  }\n\n  .ListItem {\n    cursor: pointer;\n\n    &:hover {\n      color: #a2a59e;\n    }\n  }\n\n\n  .arrow-svg {\n    cursor: pointer;\n    width: 0.875rem;\n    height: 0.875rem;\n    stroke: ",";\n    transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\n    position: absolute;\n    left: 5px;\n    bottom: 0px;\n  }\n\n  .arrow-svg-close {\n    transform: rotate(180deg);\n  }\n\n  .InputContainer {\n    display: flex;\n    position: absolute;\n    background: #e3ffa8e0;\n    border-radius: 10px;\n    padding: 10px;\n    z-index: 9999;\n    width: max-content;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  }\n\n  .InputContainer input {\n    color: black;\n  }\n\n  .ButtonSave {\n    border-radius: 5px;\n    background: black;\n    color: white;\n    border: none;\n  }\n\n"])),(e=>e.theme.color.primary_green_lite),(e=>e.theme.color.primary_green_lite),(e=>e.theme.color.primary_green_lite),(e=>e.theme.color.primary_white),(e=>e.theme.color.primary_green_lite),(e=>e.theme.color.primary_green_lite));var h=a(2791);const b=JSON.parse('[{"_id":"6648df8a66add5c00902521a","name":"Test7","lastName":"Contact7","email":"testcontact7@gmail.com","phone":"+231321546221389","resource":"linkedin","branch":"Office1","role":"CRM Manager","managerId":"66471239045952a48bec09b9","conManagerId":"66576190f2629553dd2d829c","conAgentId":"663f7ac18d8e7d3766b8dc7b","externalLeadId":"664611f927318e9120e01402","assigned":true,"selfCreated":false,"clientId":958460,"status":"New","country":"England","region":"London","city":"London","timeZone":0,"KYC":{"trading":false,"experience":"beginner","investment":"0-500","time":"0-5","riskTolerance":"low","profitGoal":"conservative"},"latestComment":{"createdBy":{"username":"Conversion Manager2","email":"R1231AJHAH231234@gmail.com","branch":"Office1","role":"Conversion Manager","createdAt":"2024-05-29T18:06:16.311+00:00"},"comment":"Current lead was reassigned from agent Conversion Agent1 to Conversion Manager2","createdAt":"2024-05-17T15:31:24.538+00:00","updatedAt":"2024-05-29T18:06:16.312+00:00","nextCall":"2024-05-31T15:14:22.000+00:00"}},{"_id":"6657460f26999ad41b4cb8c2","name":"Test9","lastName":"Contact9","email":"testcontact9@gmail.com","phone":"+231321546221389","resource":"instagram","branch":"Office1","managerId":"66471239045952a48bec09b9","externalLeadId":"6643c580df3e2a308c799f62","assigned":false,"selfCreated":false,"clientId":574491,"status":"New","country":"","region":"","city":"","timeZone":0,"KYC":{"trading":false,"experience":"beginner","investment":"0-500","time":"0-5","riskTolerance":"low","profitGoal":"conservative"},"latestComment":{"createdBy":{"username":"Conversion Manager2","email":"R1231AJHAH231234@gmail.com","branch":"Office1","role":"Conversion Manager","createdAt":"2024-05-29T18:07:50.755+00:00"},"comment":"Current lead was reassigned from agent Conversion Agent1 to Conversion Manager2","createdAt":"2024-05-29T15:13:19.542+00:00","updatedAt":"2024-05-29T18:07:50.756+00:00","nextCall":"2024-05-31T15:14:22.000+00:00"},"conManagerId":"66576190f2629553dd2d829c"},{"_id":"66574a1028e0ad808bee57f1","name":"Test10","lastName":"Contact10","email":"testcontact10@gmail.com","phone":"+231321546221389","resource":"Magazine","branch":"Office1","managerId":"66471239045952a48bec09b9","externalLeadId":"6643c580df3e2a308c799f62","assigned":true,"selfCreated":false,"clientId":113670,"status":"New","country":"","region":"","city":"","timeZone":4,"KYC":{"trading":false,"experience":"beginner","investment":"0-500","time":"0-5","riskTolerance":"low","profitGoal":"conservative"},"latestComment":{"createdBy":{"username":"Administrator","email":"bigfunnyguy@gmail.com","branch":"Main","role":"Administrator","createdAt":"2024-06-02T14:49:54.592+00:00"},"comment":"The lead next call was changed to Fri May 31 2024 17:14:22 by the user\u2026","createdAt":"2024-05-29T15:30:24.043+00:00","updatedAt":"2024-06-02T14:49:54.594+00:00","nextCall":"2024-05-31T15:14:22.000+00:00"},"conAgentId":"663f7ac18d8e7d3766b8dc7b"},{"_id":"6657735cf3b3c8370ae16d72","name":"Test","lastName":"Contact","email":"test0contact@gmail.com","phone":"+231321546221389","resource":"Gazeta","branch":"Office1","managerId":"66471239045952a48bec09b9","externalLeadId":"6643c55edf3e2a308c799f5f","assigned":true,"selfCreated":false,"clientId":982656,"status":"New","country":"","region":"","city":"","timeZone":0,"KYC":{"trading":false,"experience":"beginner","investment":"0-500","time":"0-5","riskTolerance":"low","profitGoal":"conservative"},"latestComment":{"createdBy":{"username":"Conversion Manager2","email":"R1231AJHAH231234@gmail.com","branch":"Office1","role":"Conversion Manager","createdAt":"2024-05-29T18:30:37.341+00:00"},"comment":"Current lead was reassigned from agent Conversion Agent1 to Conversion\u2026","createdAt":"2024-05-29T18:26:36.477+00:00","updatedAt":"2024-05-29T18:30:37.341+00:00","nextCall":"2024-05-31T15:14:22.000+00:00"},"conAgentId":"663f7ac18d8e7d3766b8dc7b"},{"_id":"66577413f3b3c8370ae16d7e","name":"Test11","lastName":"Contact11","email":"testcontact11@gmail.com","phone":"+231321546221389","resource":"tv","branch":"Office1","managerId":"66471239045952a48bec09b9","externalLeadId":"665773a2f3b3c8370ae16d78","assigned":true,"selfCreated":true,"clientId":724921,"status":"New","country":"United States","region":"Washington","city":"Washington","timeZone":0,"KYC":{"trading":false,"experience":"beginner","investment":"0-500","time":"0-5","riskTolerance":"low","profitGoal":"conservative"},"latestComment":{"createdBy":{"username":"Conversion Manager2","email":"R1231AJHAH231234@gmail.com","branch":"Office1","role":"Conversion Manager","createdAt":"2024-05-29T18:30:50.628+00:00"},"comment":"Current lead was reassigned from agent Conversion Agent1 to Conversion\u2026","createdAt":"2024-05-29T18:29:39.667+00:00","updatedAt":"2024-05-29T18:30:50.629+00:00","nextCall":"2024-05-31T15:14:22.000+00:00"},"conAgentId":"663f7ac18d8e7d3766b8dc7b"},{"_id":"66577e84eb9a310fc4b32044","name":"Test7","lastName":"Contact7","email":"test07contact@gmail.com","phone":"+1113217777777777","resource":"Conversion Agent1","branch":"Office1","managerId":"66471239045952a48bec09b9","owner":{"username":"SonGlad","email":"Bunny@gmail.com","id":"663f72888d8e7d3766b8dc42","role":"Developer"},"assigned":false,"selfCreated":true,"clientId":650228,"status":"New","country":"Belgium","region":"Walonie","city":"Genappe","timeZone":1,"KYC":{"trading":false,"experience":"beginner","investment":"0-500","time":"0-5","riskTolerance":"low","profitGoal":"conservative"},"latestComment":{"createdBy":{"username":"SonGlad","email":"Bunny@gmail.com","role":"Developer","branch":"Main","createdAt":"2024-05-29T19:14:12.895+00:00"},"comment":"New Lead Was Created in Office 1 branch by user SonGlad","createdAt":"2024-05-29T19:14:12.915+00:00","updatedAt":"2024-05-29T19:14:12.915+00:00","nextCall":"2024-05-31T15:14:22.000+00:00"}},{"_id":"665783e3af0f9a87ac6b7e65","name":"Test12","lastName":"Contact12","email":"test012contact@gmail.com","phone":"+1113217777777777","resource":"Conversion Agent1","branch":"Office1","managerId":"66471239045952a48bec09b9","owner":{"username":"Conversion Agent1","email":"Wolf@gmail.com","id":"663f7ac18d8e7d3766b8dc7b","role":"Conversion Agent"},"assigned":false,"selfCreated":true,"clientId":117505,"status":"New","country":"Ukraine","region":"kharkiv","city":"Kharkiv","timeZone":0,"KYC":{"trading":false,"experience":"beginner","investment":"0-500","time":"0-5","riskTolerance":"low","profitGoal":"conservative"},"latestComment":{"createdBy":{"username":"Conversion Agent1","email":"Wolf@gmail.com","role":"Conversion Agent","branch":"Office1","createdAt":"2024-05-29T19:37:07.859+00:00"},"comment":"New Lead Was Created in Office 1 branch by user Conversion Agent1","createdAt":"2024-05-29T19:37:07.876+00:00","updatedAt":"2024-05-29T19:37:07.876+00:00","nextCall":"2024-05-31T15:14:22.000+00:00"}}]'),f=JSON.parse('["New","N/A","Wrong Number","Wrong Person","Potential","Not Interested","In the Money","Call Back 1","Call Back 2","Call Back 3","Not Potential","Reassign","Never Answer"]'),p=JSON.parse('["-12","-11","-10","-9","-8","-7","-6","-5","-4","-3","-2","-1","0","+1","+2","+3","+4","+5","+6","+7","+8","+9","+10","+11","+12"]');var x=a(9388),w=a(184);const C=()=>{const[e,n]=(0,h.useState)(b),[a,t]=(0,h.useState)(new Date),[r,l]=(0,h.useState)(!1),[s,o]=(0,h.useState)({row:null,cell:null}),c=(0,h.useRef)(null),i=(0,h.useRef)(null);(0,h.useEffect)((()=>{const e=setInterval((()=>{t(new Date)}),1e3);return()=>clearInterval(e)}),[]);const d=(a,t,r)=>{const l=[...e],s=r.split(".");2===s.length?l[t][s[0]][s[1]]=a.target.value:l[t][r]=a.target.value,n(l)},m=e=>{e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")},g=e=>{m(e.target)};(0,h.useEffect)((()=>{document.querySelectorAll("textarea").forEach((e=>{m(e)}))}),[e]);const C=(a,t)=>{const r=[...e];r[a].status=t,n(r),o({row:null,cell:null})},v=(e,n)=>{l(!1===r&&e),o(s.row===e&&s.cell===n?{row:null,cell:null}:{row:e,cell:n})},T=(e,n)=>s.row===e&&s.cell===n?"arrow-svg-close":"";(0,h.useEffect)((()=>{if(null!==s.row&&null!==s.cell){const e=document.getElementById("".concat(s.cell,"-").concat(s.row)),n=c.current,a=i.current;if(e&&(n||a)){const t=e.getBoundingClientRect();n&&(n.style.top="".concat(t.top+window.scrollY+t.height,"px"),n.style.left="".concat(t.left+window.scrollX,"px")),a&&(a.style.top="".concat(t.top+window.scrollY+t.height,"px"),a.style.left="".concat(t.left+window.scrollX,"px")),a&&"status"===s.cell&&(a.style.display="grid",a.style.top="".concat((t.top+window.scrollY+t.height)/2,"px"),a.style.left="".concat(t.right+window.scrollX,"px")),a&&"timeZone"===s.cell&&(a.style.display="flex",a.style.left="".concat((t.right+window.scrollX)/1.36,"px"))}}}),[s]);const N=(0,h.useCallback)((e=>{"Escape"===e.key&&(l(!1),o({row:null,cell:null}))}),[]),I=(0,h.useCallback)((e=>{if(!e.target.classList.contains("arrow-svg-close")&&(c.current&&!c.current.contains(e.target)||i.current&&!i.current.contains(e.target)))return l(!1),void o({row:null,cell:null})}),[]);return(0,h.useEffect)((()=>(document.addEventListener("keydown",N),document.addEventListener("click",I),()=>{document.removeEventListener("keydown",N),document.removeEventListener("click",I)})),[I,N]),(0,w.jsxs)(u,{children:[(0,w.jsxs)("table",{className:"Table",children:[(0,w.jsx)("thead",{className:"TableHeader",children:(0,w.jsxs)("tr",{className:"TableHeaderList",children:[(0,w.jsx)("th",{className:"TableHeaderItem",children:"Client Id"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Name"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Last Name"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Email"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Phone"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Status"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Source"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Country"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Region"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"City"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Time Zone"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Client Time"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Self created"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Last update"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Created At"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Agent"}),(0,w.jsx)("th",{className:"TableHeaderItem",children:"Next call"})]})}),(0,w.jsx)("tbody",{children:e&&e.map(((e,n)=>{return(0,w.jsxs)("tr",{className:"WordList",children:[(0,w.jsx)("td",{className:"TableHeaderItem",children:e.clientId}),(0,w.jsx)("td",{className:"TableHeaderItem",children:e.name}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"lastName-".concat(n),children:[e.lastName,(0,w.jsx)(x.r,{onClick:()=>v(n,"lastName"),className:"arrow-svg ".concat(T(n,"lastName"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"email-".concat(n),children:[e.email,(0,w.jsx)(x.r,{onClick:()=>v(n,"email"),className:"arrow-svg ".concat(T(n,"email"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"phone-".concat(n),children:[e.phone,(0,w.jsx)(x.r,{onClick:()=>v(n,"phone"),className:"arrow-svg ".concat(T(n,"phone"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"status-".concat(n),children:[e.status,(0,w.jsx)(x.r,{onClick:()=>v(n,"status"),className:"arrow-svg ".concat(T(n,"status"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"resource-".concat(n),children:[e.resource,(0,w.jsx)(x.r,{onClick:()=>v(n,"resource"),className:"arrow-svg ".concat(T(n,"resource"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"country-".concat(n),children:[e.country,(0,w.jsx)(x.r,{onClick:()=>v(n,"country"),className:"arrow-svg ".concat(T(n,"country"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"region-".concat(n),children:[e.region,(0,w.jsx)(x.r,{onClick:()=>v(n,"region"),className:"arrow-svg ".concat(T(n,"region"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"city-".concat(n),children:[e.city,(0,w.jsx)(x.r,{onClick:()=>v(n,"city"),className:"arrow-svg ".concat(T(n,"city"))})]}),(0,w.jsxs)("td",{className:"TableHeaderItem",id:"timeZone-".concat(n),children:[e.city,(0,w.jsx)(x.r,{onClick:()=>v(n,"timeZone"),className:"arrow-svg ".concat(T(n,"timeZone"))})]}),(0,w.jsx)("td",{className:"TableHeaderItem",children:(t=e.timeZone,new Date(a.getTime()+60*t*60*1e3).toLocaleString())}),(0,w.jsx)("td",{className:"TableHeaderItem",children:e.selfCreated?"Yes":"No"}),(0,w.jsx)("td",{className:"TableHeaderItem",children:e.latestComment.updatedAt.slice(0,16).replace("T"," ")}),(0,w.jsx)("td",{className:"TableHeaderItem",children:e.latestComment.createdAt.slice(0,16).replace("T"," ")}),(0,w.jsx)("td",{className:"TableHeaderItem",style:{background:e.assigned?"none":"#ff000082"},children:e.conAgentId}),(0,w.jsx)("td",{className:"TableHeaderItem",children:(0,w.jsx)("label",{children:(0,w.jsx)("input",{type:"datetime-local",value:e.latestComment.nextCall.toString().slice(0,16),onChange:e=>d(e,n,"latestComment.nextCall"),onInput:g})})})]},e._id);var t}))})]}),null!==s.row&&null!==s.cell&&"status"!==s.cell&&"timeZone"!==s.cell&&(0,w.jsxs)("form",{className:"InputContainer",ref:c,children:[(0,w.jsx)("input",{value:e[s.row][s.cell],onChange:e=>d(e,s.row,s.cell),onInput:g}),(0,w.jsx)("button",{className:"ButtonSave",type:"submit",children:"Save"})]}),null!==s.row&&"status"===s.cell&&(0,w.jsx)("ul",{className:"dropdown",ref:i,children:f.map(((e,n)=>(0,w.jsx)("li",{className:"ListItem",value:e,onClick:()=>C(s.row,e),children:e},n)))}),null!==s.row&&"timeZone"===s.cell&&(0,w.jsx)("ul",{className:"dropdown",ref:i,children:p.map(((e,n)=>(0,w.jsx)("li",{className:"ListItem",value:e,onClick:()=>C(s.row,e),children:e},n)))})]})},v=()=>{const{isAdmin:e}=(0,m.a)(),{availableUsersForAssign:n}=(0,g.a)(),a=(0,d.I0)();console.log("Users for Assign",n);return(0,w.jsx)(s,{children:(0,w.jsxs)("div",{className:"wraper",children:[e&&(0,w.jsx)(c.OL,{to:"/",onClick:()=>{a((0,i.CT)())},children:(0,w.jsx)("h1",{children:"Back"})}),(0,w.jsx)(C,{})]})})},T=()=>(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(v,{})})}}]);
//# sourceMappingURL=185.1d64908a.chunk.js.map